{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst API_KEY = '48876582-9b859673e779d9e5d61f29cd8';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function searchImages(searchImage, page = 1, perPage = 40) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: searchImage,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: perPage,\n  });\n\n  const url = BASE_URL + `?${params}`;\n\n  try {\n    const response = await axios.get(url);\n    return response;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    return null;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n\n  const markup = images\n    .map(\n      image => `\n        <li class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n                <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            <div class=\"image-info\">\n                <p>üëç ${image.likes}</p>\n                <p>üëÅÔ∏è ${image.views}</p>\n                <p>üí¨ ${image.comments}</p>\n                <p>‚¨áÔ∏è ${image.downloads}</p>\n            </div>\n          </a>\n        </li>\n    `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  const galleryItem = gallery.querySelector('.gallery-item');\n  const cardHeight = galleryItem.getBoundingClientRect().height;\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  lightbox.refresh();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { searchImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-input');\nconst waitMessage = document.querySelector('.wait-message');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst loadMoreMessage = document.querySelector('.load-more-message');\n\nlet searchImage = '';\nlet currentPage = 1;\nlet totalHits = 0;\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  searchImage = input.value.trim();\n  if (!searchImage) {\n    iziToast.warning({\n      title: 'Error',\n      message: 'Input search string',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  currentPage = 1;\n  gallery.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n  waitMessage.innerHTML =\n    'Loading images, please wait...<span class=\"loader\"></span>';\n\n  try {\n    const response = await searchImages(searchImage, currentPage);\n    if (!response) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Something went wrong. Please try again',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    totalHits = response.data.totalHits;\n\n    if (response.data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    } else {\n      renderImages(response.data.hits);\n      if (response.data.hits.length < totalHits) {\n        loadMoreBtn.style.display = 'inline-block';\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again',\n      position: 'topRight',\n    });\n    console.log(error);\n  } finally {\n    waitMessage.textContent = '';\n  }\n  form.reset();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  loadMoreMessage.innerHTML =\n    'Loading more images, please wait...<span class=\"loader\"></span>';\n  loadMoreBtn.disabled = true;\n\n  try {\n    const response = await searchImages(searchImage, currentPage);\n    if (response.data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no more images to load.',\n        position: 'topRight',\n      });\n      loadMoreBtn.style.display = 'none';\n    } else {\n      renderImages(response.data.hits);\n      if (currentPage * 40 >= totalHits) {\n        loadMoreBtn.style.display = 'none';\n        iziToast.info({\n          title: 'End of results',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n        });\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again',\n      position: 'topRight',\n    });\n    console.log(error);\n  } finally {\n    loadMoreMessage.textContent = '';\n    loadMoreBtn.disabled = false;\n  }\n});\n"],"names":["API_KEY","BASE_URL","searchImages","searchImage","page","perPage","params","url","axios","error","renderImages","images","gallery","markup","image","cardHeight","SimpleLightbox","form","input","waitMessage","loadMoreBtn","loadMoreMessage","currentPage","totalHits","e","iziToast","response"],"mappings":"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"}